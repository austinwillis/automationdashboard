<div class="row list-controls">
  <div class="col-md-2">
    <div class="input-group">
      <input (input)="suiteSubject.next($event.target.value)" class="search-field form-control" type="text" name="fname" placeholder="Search Suites" />
    </div>
  </div>
  <div class="col-md-2">
    <div class="input-group">
      <input (input)="testSubject.next($event.target.value)" class="search-field form-control" type="text" name="lname" placeholder="Search Tests" />
    </div>
  </div>
  <div class="col-md-2">
    <div class="input-group">
      <select #status (change)="this.statusFilter = status.value" class="search-field form-control">
        <option [selected]="this.statusFilter === ''" value="">All</option>
        <option [selected]="this.statusFilter === 'Consistent'" value="Consistent">Consistent</option>
        <option [selected]="this.statusFilter === 'Quarantine'" value="Quarantine">Quarantine</option>
      </select>
    </div>
  </div>
  <div class="col-md-2">
    <div class="input-group">
      <select #result (change)="this.resultFilter = result.value" class="search-field form-control">
        <option [selected]="this.resultFilter === ''" value="">All</option>
        <option [selected]="this.resultFilter === 'PASS'" value="PASS">Pass</option>
        <option [selected]="this.resultFilter === 'FLAKE'" value="FLAKE">Flake</option>
        <option [selected]="this.resultFilter === 'FAIL'" value="FAIL">Fail</option>
        <option [selected]="this.resultFilter === 'BUG'" value="BUG">Bug</option>
        <option [selected]="this.resultFilter === 'SKIP'" value="SKIP">Skip</option>
      </select>
    </div>
  </div>
  <div class="btn-group col-md-2" dropdown [(isOpen)]="status.isResultOpen" >
    <button [disabled]="this.testsStore.selectedTests.length === 0" id="result-button" type="button" class="btn btn-secondary" dropdownToggle>
      Mass Change Result
    </button>
    <ul dropdownMenu role="menu" aria-labelledby="result-button">
      <li role="menuitem"><a class="dropdown-item" (click)="this.testsStore.massChangeResult('PASS')" href="#">Pass</a></li>
      <li role="menuitem"><a class="dropdown-item" (click)="this.testsStore.massChangeResult('FAIL')" href="#">Fail</a></li>
      <li role="menuitem"><a class="dropdown-item" (click)="this.testsStore.massChangeResult('FLAKE')" href="#">Flake</a></li>
      <li role="menuitem"><a class="dropdown-item" (click)="this.testsStore.massChangeResult('SKIP')" href="#">Skip</a></li>
      <li role="menuitem"><a class="dropdown-item" (click)="this.testsStore.massChangeResult('BUG')" href="#">Bug</a></li>
    </ul>
  </div>
  <div class="btn-group col-md-2" dropdown [(isOpen)]="status.isStatusOpen">
    <button [disabled]="this.testsStore.selectedTests.length === 0" id="status-button" type="button" class="btn btn-secondary" dropdownToggle>
      Mass Change Status
    </button>
    <ul dropdownMenu role="menu" aria-labelledby="status-button">
      <li role="menuitem"><a class="dropdown-item" (click)="this.testsStore.massChangeStatus('Consistent')" href="#">Consistent</a></li>
      <li role="menuitem"><a class="dropdown-item" (click)="this.testsStore.massChangeStatus('Quarantine')" href="#">Quarantine</a></li>
    </ul>
  </div>
</div>
<div *ngIf="testsStore.isLoading" class="row">
  <div class="col-md-2 offset-md-5 loader"></div>
</div>
<div *ngIf="!testsStore.isLoading" class="list-content" infinite-scroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="500" (scrolled)="onScroll()">
  <div *ngFor="let test of testsStore.tests | filter:suiteFilter:testFilter:resultFilter:statusFilter">
    <test-detail [test]="test"></test-detail>
  </div>
</div>
